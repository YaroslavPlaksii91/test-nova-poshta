{"version":3,"file":"static/js/status-view.799f760d.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/components/Button/Button.module.css?ce6f","components/Button/Button.js","services/api.js","webpack://react-homework-template/./src/components/DocumentForm/DocumentForm.module.css?b91a","components/DocumentForm/DocumentForm.js","webpack://react-homework-template/./src/components/DocumentStatus/DocumentStatus.module.css?717a","components/DocumentStatus/DocumentStatus.js","webpack://react-homework-template/./src/components/History/History.module.css?018a","components/History/History.js","webpack://react-homework-template/./src/views/StatusView.module.css?a768","views/StatusView.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"button\":\"Button_button__wiIYs\"};","import s from './Button.module.css';\n\nconst Button = ({ type, width, children, onClick }) => (\n  <button\n    type={type}\n    className={s.button}\n    onClick={onClick}\n    style={{ width: width }}\n  >\n    {children}\n  </button>\n);\n\nexport default Button;\n","import axios from 'axios';\n\nconst API_KEY = '1b28326edcff857f4ee526a21a2b6018';\naxios.defaults.baseURL = 'https://api.novaposhta.ua/v2.0/json/';\n\nexport async function getDocumentStatus(documentNumber) {\n  const { data } = await axios.post('', {\n    apiKey: API_KEY,\n    modelName: 'TrackingDocument',\n    calledMethod: 'getStatusDocuments',\n    methodProperties: {\n      Documents: [\n        {\n          DocumentNumber: documentNumber,\n        },\n      ],\n    },\n  });\n\n  return data.data[0];\n}\n\nexport async function getWarehouses(settlement = 'Київ', page = '1') {\n  const { data } = await axios.post('', {\n    apiKey: API_KEY,\n    modelName: 'Address',\n    calledMethod: 'getWarehouses',\n    methodProperties: {\n      CityName: settlement,\n      Page: page,\n      Limit: '100',\n      Language: 'UA',\n    },\n  });\n\n  return data.data;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"DocumentForm_form__iABTt\"};","import { toast } from 'react-toastify';\nimport { getDocumentStatus } from 'services/api';\nimport Button from 'components/Button';\nimport s from './DocumentForm.module.css';\n\nconst DocumentForm = ({\n  docNumber,\n  documents,\n  setDocNumber,\n  setDocStatus,\n  addNewDocument,\n  setIsLoading,\n}) => {\n  const handleChange = e => {\n    setDocNumber(e.target.value);\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    const regex = /^\\d{14}$/;\n    const isValid = regex.test(docNumber);\n\n    if (!isValid) return toast.warn('Номер повинен містити 14 цифр');\n\n    if (documents.includes(docNumber)) return toast.warn('Документ вже існує');\n\n    try {\n      setIsLoading(true);\n      const {\n        Status: status,\n        WarehouseSender: sender,\n        WarehouseRecipient: recipient,\n      } = await getDocumentStatus(docNumber);\n\n      setDocStatus({ status, sender, recipient });\n      addNewDocument(docNumber);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className={s.form}>\n      <label htmlFor=\"documentNumber\"></label>\n      <input\n        id=\"documentNumber\"\n        type=\"text\"\n        name=\"documentNumber\"\n        title=\"Введіть номер накладної\"\n        required\n        value={docNumber}\n        onChange={handleChange}\n      />\n\n      <Button type={'submit'} width={150}>\n        Get status TTN\n      </Button>\n    </form>\n  );\n};\n\nexport default DocumentForm;\n","// extracted by mini-css-extract-plugin\nexport default {\"section\":\"DocumentStatus_section__EnAfb\",\"title\":\"DocumentStatus_title__jsuyB\",\"text\":\"DocumentStatus_text__1EvRi\"};","import s from './DocumentStatus.module.css';\n\nconst DocumentStatus = ({ info }) => {\n  return (\n    <section className={s.section}>\n      <p className={s.text}>\n        <span className={s.title}>Статус доставки:</span> {info.status}\n      </p>\n      <p className={s.text}>\n        <span className={s.title}>Відправлено:</span> {info.sender}\n      </p>\n      <p className={s.text}>\n        <span className={s.title}>Отримано:</span> {info.recipient}\n      </p>\n    </section>\n  );\n};\n\nexport default DocumentStatus;\n","// extracted by mini-css-extract-plugin\nexport default {\"aside\":\"History_aside__pQShz\",\"title\":\"History_title__xknBX\",\"list\":\"History_list__TaRUR\",\"item\":\"History_item__Y4S9P\",\"itemText\":\"History_itemText__8p9TF\",\"icon\":\"History_icon__-R7Oh\"};","import { FcEmptyTrash } from 'react-icons/fc';\nimport { toast } from 'react-toastify';\nimport { getDocumentStatus } from 'services/api';\nimport Button from 'components/Button';\nimport s from './History.module.css';\n\nconst History = ({\n  documents,\n  setDocStatus,\n  setDocNumber,\n  setDocuments,\n  setIsLoading,\n  docNumber,\n}) => {\n  const onDocClick = async e => {\n    if (e.target.textContent === docNumber)\n      return toast.warn('Документ вже вибраний');\n\n    try {\n      setIsLoading(true);\n      const {\n        Status: status,\n        WarehouseSender: sender,\n        WarehouseRecipient: recipient,\n      } = await getDocumentStatus(e.target.textContent);\n\n      setDocStatus({ status, sender, recipient });\n      setDocNumber(e.target.textContent);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const onBtnClick = () => {\n    localStorage.removeItem('documents');\n    setDocuments([]);\n  };\n\n  const onDelete = e => {\n    const docNum =\n      e.target.parentNode.previousSibling.textContent ||\n      e.target.previousSibling.textContent;\n\n    const filteredDocs = documents.filter(doc => doc !== docNum);\n\n    setDocuments([...filteredDocs]);\n  };\n\n  return (\n    <aside className={s.aside}>\n      <h2 className={s.title}>Історія</h2>\n      <ul className={s.list}>\n        {documents.length > 0 &&\n          documents.map(doc => (\n            <li key={doc} className={s.item}>\n              <p className={s.itemText} tabIndex=\"0\" onClick={onDocClick}>\n                {doc}\n              </p>\n              <FcEmptyTrash\n                className={s.icon}\n                tabIndex=\"0\"\n                title=\"Видалити з історії\"\n                onClick={onDelete}\n              />\n            </li>\n          ))}\n      </ul>\n      {documents.length > 0 && (\n        <Button type={'button'} width={150} onClick={onBtnClick}>\n          Очистити історію\n        </Button>\n      )}\n    </aside>\n  );\n};\n\nexport default History;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"StatusView_wrapper__wKXue\"};","import { useState, useEffect, useRef } from 'react';\nimport DocumentForm from 'components/DocumentForm';\nimport DocumentStatus from 'components/DocumentStatus';\nimport History from 'components/History';\nimport s from './StatusView.module.css';\n\nconst StatusView = ({ setIsLoading }) => {\n  const [docNumber, setDocNumber] = useState('');\n  const [info, setInfo] = useState('');\n  const [documents, setDocuments] = useState(\n    () => JSON.parse(localStorage.getItem('documents')) ?? []\n  );\n  const isFirstRender = useRef(true);\n\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    localStorage.setItem('documents', JSON.stringify(documents));\n  }, [documents]);\n\n  const setDocStatus = docStatus => {\n    setInfo(docStatus);\n  };\n\n  const addNewDocument = newDoc => {\n    setDocuments([...documents, newDoc]);\n  };\n\n  return (\n    <>\n      <DocumentForm\n        docNumber={docNumber}\n        documents={documents}\n        setDocNumber={setDocNumber}\n        setDocStatus={setDocStatus}\n        addNewDocument={addNewDocument}\n        setIsLoading={setIsLoading}\n      />\n      <div className={s.wrapper}>\n        {info && <DocumentStatus info={info} />}\n        <History\n          documents={documents}\n          setDocStatus={setDocStatus}\n          setDocNumber={setDocNumber}\n          setDocuments={setDocuments}\n          setIsLoading={setIsLoading}\n          docNumber={docNumber}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default StatusView;\n"],"names":["type","width","children","onClick","className","s","style","API_KEY","getDocumentStatus","documentNumber","axios","apiKey","modelName","calledMethod","methodProperties","Documents","DocumentNumber","data","getWarehouses","settlement","page","CityName","Page","Limit","Language","docNumber","documents","setDocNumber","setDocStatus","addNewDocument","setIsLoading","handleSubmit","e","preventDefault","test","toast","includes","status","Status","sender","WarehouseSender","recipient","WarehouseRecipient","console","log","onSubmit","htmlFor","id","name","title","required","value","onChange","target","Button","info","setDocuments","onDocClick","textContent","onDelete","docNum","parentNode","previousSibling","filteredDocs","filter","doc","length","map","tabIndex","localStorage","removeItem","useState","setInfo","JSON","parse","getItem","isFirstRender","useRef","useEffect","current","setItem","stringify","docStatus","newDoc"],"sourceRoot":""}